<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../css/sign.css">
        <link rel="icon" href="../images/Baguio-Eats.png">
        <script  async type="text/javascript">
            
            function signUp(){
                var username = document.forms['signUpForm']['username'].value;
                var email = document.forms['signUpForm']['email'].value;
                var passwd = document.forms['signUpForm']['passwd'].value;
                var birth = document.forms['signUpForm']['bday'].value;

                var user = {
                    'username':username,
                    'email':email,
                    'passwd':passwd,
                    'birth':birth,
                }

                let userArray = [];

                //localStorage.setItem('users', userArray);
                const array = JSON.parse(localStorage.getItem('users'));
                userArray = [array];
                userArray.push(users)

                
                localStorage.setItem('users', JSON.stringify(userArray));
                console.log(JSON.stringify(userArray));
                console.log(array);
            }

            function validate(){
                var email = document.forms['signUpForm']['email'].value;
                var emailFilter = /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/;

                if (!emailFilter.test(email)) {
                    alert('Please enter a valid e-mail address.');
                    return false;
                }

                return true;

            }
            
            /*
            function signIn(){
                var email = document.forms['signInForm']['email'].value;
                var passwd = document.forms['signInForm']['passwd'].value;

                var users = {
                    'email':email,
                    'passwd':passwd,

                }

                localStorage.setItem('users', JSON.stringify(users));
                //console.log(email);
                //console.log(passwd);
            }

            /*
            var idbSupported = false;
            var db;
             
            document.addEventListener("DOMContentLoaded", function(){
             
                if("indexedDB" in window) {
                    idbSupported = true;
                }
             
                if(idbSupported) {
                    var openRequest = indexedDB.open("test_v2",1);
             
                    openRequest.onupgradeneeded = function(e) {
                        console.log("running onupgradeneeded");
                        var thisDB = e.target.result;
             
                        if(!thisDB.objectStoreNames.contains("firstOS")) {
                            thisDB.createObjectStore("firstOS");
                        }
             
                    }
             
                    openRequest.onsuccess = function(e) {
                        console.log("Success!");
                        db = e.target.result;
                    }
             
                    openRequest.onerror = function(e) {
                        console.log("Error");
                        console.dir(e);
                    }
             
                }
             
            },false);
            */
            
        </script>
        <title>Baguio Eats</title>
    </head>
    
    <body>
        <header>
            <img src="../images/Baguio-Eats-Logo.png">
            <div>
                <a href="../index.html" class="option">Home</a>
                <a href="../index.html#about" class="option">About</a>
                <a href="sign.html" class="option">Sign In</a>
            </div>
        </header>

        <div id="signIn"> 
            <h1> Sign Up! </h1>
            <form name="signUpForm">
                <fieldset id="personalinfo">
                    <legend> Personal Information: </legend>
                    User Name <br>
                    <input type="text" name="username" placeholder="Pick a Username">
                    <br>
                    Email <br>
                    <input type="email" name="email" placeholder="you@example.com">
                    <br>
                    Password <br>
                    <input type="password" name="passwd" placeholder="Create a password">
                    <br>
                    Birthdate <br>
                    <input type="date" name="bday" min="1998-12-31" max="1960-01-02">
                </fieldset>

                <a href="../index.html"><button type="button" onclick="signUp()"> Submit!</button></a>
                
            </form>

                 <p> Already have an account? Sign In!</p>

            <form id="signInForm">
                <h1> Sign In! </h1>
                <fieldset>
                        <legend> Sign In! </legend>
                        Email <br>
                        <input type="email" name="email">
                        <br>
                        Password <br>
                        <input type="password" name="passwd">
                        <br><br>
                        <a href="../index.html"><button type="button" onclick="signIn()"> Sign In </button></a>
                </fieldset>
            </form>            
        </div>
        
        <footer>
            
        </footer>
    </body>
</html>